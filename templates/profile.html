<center>
  <div class="content" style="width: 400px; height: 380px; margin-top: 100px;">
    <div style="margin-left: 40px; padding-top: 12px; width: 320px; height: 100%">
      <p style="margin-bottom:12; margin-top: 0;">Public Key:</p>
      <div id="public_key_box" style="overflow-wrap: break-word; margin: 0; line-break: anywhere;" class="key_box"><p style="margin:0" id="public_key_box_text"></p></div>
      <p style="margin-top:12; margin-bottom:12;">Private Key: Hover to view</p>
      <div id="private_key_box" style="overflow-wrap: break-word; margin: 0; line-break: anywhere;" class="key_box"><p style="margin:0" id="private_key_box_text" class="spoiler"></p></div>
      <br style="line-height: 12px" />
      <a href="/change_key" style="text-decoration: none;">Change your keys</a>
    </div>
  </div>
</center>

<script>

  privateKeyBox = document.getElementById('private_key_box');
  publicKeyText = document.getElementById('public_key_box_text');
  privateKeyText = document.getElementById('private_key_box_text');

  async function fillKeyBoxes() {

    fetch("/get_username", {
      method: "GET"
    })
    .then((res) => {
      if (res.ok) {return res.json();}
      else {throw new Error("FETCH FAILED.")}
    })
    .then((json) => {

      username = json.username;
      publicKey = localStorage.getItem(username + "_public");
      privateKey = localStorage.getItem(username + "_private");

      publicKeyText.innerText = "None";
      privateKeyText.innerText = "None";

      if (publicKey != null) {publicKeyText.innerText = publicKey;}
      if (privateKey != null) {privateKeyText.innerText = privateKey;}
      
    });

  }
  fillKeyBoxes();

</script>